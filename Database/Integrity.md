### Integrity
---

<br>

>### __데이터 무결성__

<br>

__데이터의 정확성, 일관성, 유효성이 유지되는 것을 뜻함 (중복을 피해야함)__
데이터의 무결성을 유지하는 것은 DBMS의 중요한 기능이며 주로 데이터에 적용되는 연산에 제한을 두어 데이터의 무결성을 유지함

<br>

- 개체 무결성 (Entity Integrity)
  - 모든 테이블이 기본키(primary key)로 선택된 필드(column)을 가져야 함
  - 기본키는 고유한 값을 가져야하며 null을 허용하지 않음

<br>

- 참조 무결성 (Referential Integrity)
  - 참조 관계에 있는 두 테이블의 데이터가 항상 일관된 값을 갖도록 유지되는 것
  - 존재하지 않는 데이터를 참조하면 안됨

<br>

- 도메인 무결성 (Domain Integrity)
  - 테이블에 존재하는 필드의 무결성을 보장하기 위한 것
  - 필드의 타입, NULL 값의 허용 등에 대한 사항을 정의하고 올바른 데이터의 입력을 확인하는 것
  - DBMS의 기본 값 설정, NOT NULL 옵션 등의 제약 사항으로 도메인 무결성 보장

<br>

- 무결성 규칙 (Integrity rule)
  - 데이터의 무결성을 지키기 위한 모든 제약 사항
  - 비즈니스 규칙 (business rule)은 데이터베이스를 이용하는 각각의 유저에 따라 서로 다르게 적용되지만 무결성 규칙은 데이터베이스 전체에 공통적으로 적용되는 규칙

  <br><br>

  >### __키의 종류와 기능__

  <br>

데이터베이스에서 데이터의 무결성을 유지하기 위한 중요한 수단
DBMS에서 이용하는 키에는 여러 종류가 있음

<br>

__데이터베이스에서 조건에 만족하는 튜플을 찾거나 순서대로 정렬할 때 튜플들을 서로 구분할 수 있는 기준이 되는 애트리뷰트__

<br>

- 슈퍼키 (Super Key)
  - 테이블에 존재하는 필드들의 부분집합으로써 유일성을 만족해야함
  - 한 릴레이션 내에 있는 속성들의 집합으로 구성된 키로써 릴레이션을 구성하는 모든 튜플들 중 슈퍼키로 구성된 속성의 집합과 동일한 값을 나타내지 않음
  - 슈퍼키는 릴레이션을 구성하는 모든 튜플에 대해 유일성을 만족시키지만 최소성은 만족시키지 못함
  (최소성 : 학번 + 주민번호를 사영하여 슈퍼키를 만들면 다른 튜플과 구분할 수 있는 유일성은 만족하지만 학번이나 주민번호 하나만 가지고도 다른 튜플들을 구분할 수 있으므로 최소성은 만족시키지 못함)

<br>

- 후보키 (Candidate Key)
 - 기본키가 될 수 있는 후보
 - 테이블에 존재하는 전체 필드의 부분집합으로써 유일성(uniqueness)과 최소성(irreducibility)을 만족해야함
 (유일성 : 모든 레코드에서 해당 필드에 중복된 값이 나타나지 않음)
 (최소성 : 최소한의 필드로 레코드를 유일하게 구별할 수 있어야 함)
 - 하나의 릴레이션내에서는 중복된 튜플이 있을 수 없으므로 모든 릴레이션에는 반드시 하나 이상의 후보키가 존재

<br>

- 기본키 (Primary Key)
  - 기본키는 후보키 중에서 선택한 주 키
  - 한 릴레이션에서 특정 튜플을 유일하게 구별할 수 있는 속성
  - NULL 값을 가질 수 없음
  - 기본키로 정의된 속성에는 동일한 값이 중복되어 저장될 수 없음

<br>

- 대체키 (Alternate Key)
  - 후보키가 둘 이상일 때 기본키를 제외한 나머지 후보키
  - 보조키

<br>

- 복합키 (Composite key)
  - 한개 이상의 필드를 포함하는 키

<br>

- 외래키 (Foregin Key)
  - 관계를 맺고 있는 릴레이션 R1, R2에서 릴레이션 R1이 참조하고 있는 릴레이션 R2의 기본키와 같은 R1 릴레이션의 속성
  - 외래키는 참조되는 릴레이션의 기본키와 대응되어 릴레이션 간에 참조관계를 표현하는데 중요한 도구
  - 한 테이블의 키 중에서 다른 테이블의 레코드를 유일하게 식별할 수 있는 키
  - __한 테이블의 레코드에서 다른 테이블의 레코드를 참조하기 위해 이용__
  - 하나의 필드 또는 전체 필드의 부분집합으로 구성
  - 중복된 값과 NULL 값을 가질 수 있음
  - 반드시 참조되는 테이블에서 유일한 값을 갖는 필드를 참조해야함
  (참조되는 테이블의 기본키를 참조할 수도 있음)
  - 참조되는 테이블에 존재하는 값만을 가져야함

<br>

참조 관계에 있는 테이블 사이에서는 참조 무결성과 관계된 문제가 발생할 수 있음
외래키는 제약 조건을 통해 참조 무결성과 관련된 문제가 발생하지 않도록 함

<br><br>

>### __외래 키와 참조 무결성__

<br>

데이터베이스에서는 참조 무결성을 위해 참조 대상이 존재하지 않는 외래키를 허용하지 않음
__어떠한 외래키 B가 A를 참조한다면 A는 반드시 데이터베이스에 존재해야함__
외래키는 참조 무결성을 지키기 위해 RESTRICTED, CASCADE, SET NULL이라는 개념을 적용

<br>

- RESTRICTED
레코드를 변경 또는 삭제하고자 할 때 해당 레코드를 참조하고 있는 개체가 있다면 변경 또는 삭제 연산을 취소

<br>

- CASCADE
레코드를 변경 또는 삭제하면 해당 레코드를 참조하고 있는 개체도 변경 또는 삭제

<br>

- SET NULL
레코드를 변경 또는 삭제하면 해당 레코드를 참조하고 있는 개체의 값을 NULL로 설정
